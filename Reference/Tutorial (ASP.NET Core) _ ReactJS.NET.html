<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>Tutorial (ASP.NET Core) | ReactJS.NET</title>
  <meta name="viewport" content="width=device-width" />
  <meta property="og:title" content="Tutorial (ASP.NET Core) | ReactJS.NET" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://reactjs.net/tutorials/aspnetcore.html" />
  <meta property="og:image" content="https://reactjs.org/logo-og.png" />
  <meta property="og:description" content=".NET integration for ReactJS" />
  <meta property="fb:app_id" content="1417169611875552" />

  <link rel="shortcut icon" href="/favicon/favicon.ico" />
  <link rel="alternate" type="application/rss+xml" title="ReactJS.NET" href="https://reactjs.net/feed.xml" />

  <link rel='stylesheet' href='https://d33wubrfki0l68.cloudfront.net/css/ef51ab89eaa4b544852ec11aca0deb66d864e609/assets/main-45fccce12a6a074bba0f40179cfa1276.css'/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

  <script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-25623237-6', 'reactjs.net');
    ga('send', 'pageview');
  </script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="container">
    <div class="nav-main">
      <div class="wrap">
        <a class="nav-home" href="/">
          <img class="nav-logo" src="https://d33wubrfki0l68.cloudfront.net/4205d0600846259a187789ac358b9107a308d949/a4ec6/img/logo.svg" width="48" height="36">
          ReactJS.NET
        </a>
        <input id="algolia-doc-search" type="text" placeholder="Search docs..." />
        <ul class="nav-site">
          <li><a href="/docs">Docs</a></li>
          <li><a href="/getting-started/tutorial.html" class="active">Tutorial</a></li>
          <li><a href="/getting-started/download.html">Download</a></li>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="http://github.com/reactjs/React.NET">GitHub</a>
        </ul>
      </div>
    </div>

    <section class="content wrap documentationContent">
  <div class="nav-docs">
  
    <h3>Getting Started</h3>
    <ul>
      
        
          <li>
            <a href="/getting-started/aspnet.html">
              Getting Started (ASP.NET 4.x)
            </a>
          <li>
        
      
        
          <li>
            <a href="/getting-started/usage.html">
              Basic Usage
            </a>
          <li>
        
      
        
          <li>
            <a href="/getting-started/chakracore.html">
              OS X/Linux
            </a>
          <li>
        
      
        
          <li>
            <a href="/getting-started/aspnetcore.html">
              Getting Started (ASP.NET Core)
            </a>
          <li>
        
      
        
          <li>
            <a href="/getting-started/download.html">
              Downloading and Installing
            </a>
          <li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  
    <h3>Tutorials</h3>
    <ul>
      
        
      
        
      
        
      
        
      
        
      
        
          <li>
            <a href="/tutorials/aspnet4.html">
              Tutorial (ASP.NET 4.x)
            </a>
          <li>
        
      
        
          <li>
            <a href="/tutorials/aspnetcore.html" class="active">
              Tutorial (ASP.NET Core)
            </a>
          <li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  
    <h3>Features</h3>
    <ul>
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <li>
            <a href="/features/react-router.html">
              React Router
            </a>
          <li>
        
      
        
          <li>
            <a href="/features/css-in-js.html">
              CSS-in-JS
            </a>
          <li>
        
      
        
          <li>
            <a href="/features/server-side-rendering.html">
              Server-Side Rendering
            </a>
          <li>
        
      
        
          <li>
            <a href="/features/es6.html">
              Babel compilation (ES6+)
            </a>
          <li>
        
      
        
          <li>
            <a href="/features/react-helmet.html">
              React Helmet
            </a>
          <li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  
    <h3>Bundling</h3>
    <ul>
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <li>
            <a href="/bundling/msbuild.html">
              MSBuild (ASP.NET 4.x)
            </a>
          <li>
        
      
        
          <li>
            <a href="/bundling/cassette.html">
              Cassette (ASP.NET 4.x)
            </a>
          <li>
        
      
        
          <li>
            <a href="/bundling/webpack.html">
              Webpack
            </a>
          <li>
        
      
        
          <li>
            <a href="/bundling/weboptimizer.html">
              Bundling and Minification (ASP.NET 4.x)
            </a>
          <li>
        
      
        
      
        
      
        
      
        
      
    </ul>
  
    <h3>Development</h3>
    <ul>
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <li>
            <a href="/dev/code-structure.html">
              Code Structure
            </a>
          <li>
        
      
        
          <li>
            <a href="/dev/contributing.html">
              Contributing
            </a>
          <li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  
</div>


  <div class="inner-content">
    <h1>Tutorial (ASP.NET Core)</h1>
    <div class="subHeader"></div>
    <blockquote>
<p>Note:</p>

<p>This tutorial is for Visual Studio 2015 and ASP.NET Core MVC. If you&#39;re still using ASP.NET 4 and ASP.NET MVC 5, you can <a href="/tutorials/aspnet4.html">follow the ASP.NET 4 tutorial instead</a></p>
</blockquote>

<p>This tutorial covers the end-to-end process of creating a brand new ASP.NET MVC website and adding a React component in it. We will start from scratch and end with a fully functioning component. It assumes you have basic knowledge of ASP.NET MVC and using Visual Studio. This tutorial is based off the <a href="https://reactjs.org/tutorial/tutorial.html">original React tutorial</a> but has been modified specifically for ReactJS.NET.</p>

<p>We&#39;ll be building a simple, but realistic comments box that you can drop into a blog, a basic version of the realtime comments offered by Disqus, LiveFyre or Facebook comments.</p>

<p>We&#39;ll provide:</p>

<ul>
<li>  A view of all of the comments</li>
<li>  A form to submit a comment</li>
<li>  Simple server-side in-memory storage for comments</li>
</ul>

<p>It&#39;ll also have a few neat features:</p>

<ul>
<li>  <strong>Optimistic commenting:</strong> comments appear in the list before they&#39;re saved on the server so it feels fast.</li>
<li>  <strong>Live updates:</strong> other users&#39; comments are popped into the comment view in real time.</li>
<li>  <strong>Markdown formatting:</strong> users can use Markdown to format their text.</li>
</ul>
<h2><a class="anchor" name="want-to-skip-all-this-and-just-see-the-source"></a>Want to skip all this and just see the source? <a class="hash-link" href="#want-to-skip-all-this-and-just-see-the-source">#</a></h2>
<p><a href="https://github.com/reactjs/React.NET/tree/master/tutorial-code">It&#39;s all on GitHub</a>.</p>
<h2><a class="anchor" name="getting-started"></a>Getting started <a class="hash-link" href="#getting-started">#</a></h2>
<p>For this tutorial we&#39;ll be using Visual Studio 2015. If you do not already have a copy of Visual Studio, <a href="https://www.visualstudio.com/vs/community/">the Community version</a> is free. We will be using ASP.NET Core MVC.</p>
<h3><a class="anchor" name="new-project"></a>New Project <a class="hash-link" href="#new-project">#</a></h3>
<p>Start by creating a new ASP.NET Core MVC project:</p>

<ol>
<li>File → New → Project</li>
<li>Ensure &quot;.NET Framework 4.6&quot; is selected in the dropdown list at the top</li>
<li>Go to Templates → Visual C# → Web and select the &quot;ASP.NET Core Web Application (.NET Framework)&quot; template. Call it &quot;ReactDemo&quot;
<a href="/img/tutorial/newproject_core.png"><img src="https://d33wubrfki0l68.cloudfront.net/baf17891c2ff9fdb640f6d730878cbe1110655fb/8e14d/img/tutorial/newproject_core_600.png" alt="Screenshot: New Project" width="600" /></a></li>
<li>In the &quot;New ASP.NET Core Web Application&quot; dialog, select the Web Application template. Also, click &quot;Change Authentication&quot; and select &quot;No Authentication&quot;
<a href="/img/tutorial/new_webapp.png"><img src="https://d33wubrfki0l68.cloudfront.net/37e30d379855986c31fb54264fbf278c8412f940/61dfd/img/tutorial/new_webapp_600.png" alt="Screenshot: New ASP.NET Core MVC Project dialog" width="600" /></a></li>
</ol>

<p>Note: We are using .NET Framework in this tutorial, but you can instead use .NET Core if you want to be able to run your site on Linux or Mac OS. Currently .NET Core is missing some of the functionality provided by .NET Framework, so it is recommended to use .NET Framework unless you have a reason to use .NET Core specifically (eg. cross-platform support).</p>
<h3><a class="anchor" name="remove-example-content"></a>Remove example content <a class="hash-link" href="#remove-example-content">#</a></h3>
<p>The default Web Application template includes some example content that we don&#39;t need. Delete the following files:</p>

<ul>
<li>  <code>Controllers\HomeController.cs</code></li>
<li>  <code>Views\Home</code> and <code>Views\Shared</code> folders</li>
<li>  <code>bundleconfig.json</code></li>
<li>  <code>Project_Readme.html</code></li>
</ul>
<h3><a class="anchor" name="install-reactjs.net"></a>Install ReactJS.NET <a class="hash-link" href="#install-reactjs.net">#</a></h3>
<p>We need to install ReactJS.NET to the newly-created project. This is accomplished using NuGet, a package manager for .NET. Right-click on the &quot;ReactDemo&quot; project in the Solution Explorer and select &quot;Manage NuGet Packages&quot;. Click the &quot;Browse&quot; tab, search for &quot;React.AspNet&quot;, and install the <strong>React.AspNet</strong> package.</p>

<p><a href="/img/tutorial/nuget_core.png"><img src="https://d33wubrfki0l68.cloudfront.net/3427d3114351aa6f4b927e29bf2a98ecefc181bc/f8ad8/img/tutorial/nuget_core_650.png" alt="Screenshot: Install NuGet Packages" width="650" /></a></p>

<p>We also need to modify the <code>Startup.cs</code> file to initialize ReactJS.NET. You can learn more about this on the <a href="/getting-started/aspnetcore.html">Getting Started on ASP.NET Core</a> page. Open <code>Startup.cs</code> and perform the following changes:</p>

<p>At the top of the file, add:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">React.AspNet</span><span class="p">;</span>
</code></pre></div>
<p>Directly above:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="c1">// Add framework services.</span>
<span class="n">services</span><span class="p">.</span><span class="n">AddMvc</span><span class="p">();</span>
</code></pre></div>
<p>Add:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="n">services</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">IHttpContextAccessor</span><span class="p">,</span> <span class="n">HttpContextAccessor</span><span class="p">&gt;();</span>
<span class="n">services</span><span class="p">.</span><span class="n">AddReact</span><span class="p">();</span>
</code></pre></div>
<p>Directly <strong>above</strong>:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="n">app</span><span class="p">.</span><span class="n">UseStaticFiles</span><span class="p">();</span>
</code></pre></div>
<p>Add:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="c1">// Initialise ReactJS.NET. Must be before static files.</span>
<span class="n">app</span><span class="p">.</span><span class="n">UseReact</span><span class="p">(</span><span class="n">config</span> <span class="p">=&gt;</span>
<span class="p">{</span>
  <span class="c1">// If you want to use server-side rendering of React components,</span>
  <span class="c1">// add all the necessary JavaScript files here. This includes</span>
  <span class="c1">// your components as well as all of their dependencies.</span>
  <span class="c1">// See http://reactjs.net/ for more information. Example:</span>
  <span class="c1">//config</span>
  <span class="c1">//  .AddScript(&quot;~/Scripts/First.jsx&quot;)</span>
  <span class="c1">//  .AddScript(&quot;~/Scripts/Second.jsx&quot;);</span>

  <span class="c1">// If you use an external build too (for example, Babel, Webpack,</span>
  <span class="c1">// Browserify or Gulp), you can improve performance by disabling</span>
  <span class="c1">// ReactJS.NET&#39;s version of Babel and loading the pre-transpiled</span>
  <span class="c1">// scripts. Example:</span>
  <span class="c1">//config</span>
  <span class="c1">//  .SetLoadBabel(false)</span>
  <span class="c1">//  .AddScriptWithoutTransform(&quot;~/Scripts/bundle.server.js&quot;);</span>
<span class="p">});</span>
</code></pre></div>
<p>Finally, add this to <code>Views\_ViewImports.cshtml</code>:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="n">@using</span> <span class="n">React</span><span class="p">.</span><span class="n">AspNet</span>
</code></pre></div><h3><a class="anchor" name="create-basic-controller-and-view"></a>Create basic controller and view <a class="hash-link" href="#create-basic-controller-and-view">#</a></h3>
<p>Since this tutorial focuses mainly on ReactJS.NET itself, we will not cover creation of an MVC controller in much detail. To learn more about ASP.NET MVC, refer to <a href="http://www.asp.net/mvc">its official website</a>.</p>

<ol>
<li>Right-click on the Controllers folder and select Add → New Item</li>
<li>Select .NET Core → ASP.NET → MVC Controller Class</li>
<li>Name the file <code>HomeController.cs</code></li>
</ol>

<p>Once the controller has been created, we also need to create a view</p>

<ol>
<li>Right-click on the Views folder, click &quot;New Folder&quot;, and create a &quot;Home&quot; folder</li>
<li>Right-click on the Views\Home folder and select Add → New Item</li>
<li>Select .NET Core → ASP.NET → MVC View Page</li>
<li>Name the file <code>Index.cshtml</code></li>
</ol>

<p>Replace the contents of the new view file with the following:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html">@{
    Layout = null;
}
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>Hello React<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">crossorigin</span> <span class="na">src=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/react/16.4.0/umd/react.development.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">crossorigin</span> <span class="na">src=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.4.0/umd/react-dom.development.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;@Url.Content(&quot;</span><span class="err">~/</span><span class="na">Scripts</span><span class="err">/</span><span class="na">Tutorial</span><span class="err">.</span><span class="na">jsx</span><span class="err">&quot;)&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p><em>Note: In a real ASP.NET MVC site, you&#39;d use a layout. However, to keep this tutorial simple, we will keep all HTML in the one view file.</em></p>

<p>We also need to create the referenced JavaScript file (<code>tutorial.jsx</code>). Right-click on <code>wwwroot\js</code> and select Add → New Item. Select .NET Core → Client-side → JavaScript File, enter &quot;tutorial.jsx&quot; as the file name, and click &quot;Add&quot;.</p>

<p>For the remainder of this tutorial, we&#39;ll be writing our JavaScript code in this file.</p>
<h3><a class="anchor" name="your-first-component"></a>Your first component <a class="hash-link" href="#your-first-component">#</a></h3>
<p>React is all about modular, composable components. For our comment box example, we&#39;ll have the following component structure:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">- CommentBox
  - CommentList
    - Comment
  - CommentForm
</code></pre></div>
<p>Let&#39;s build the <code>CommentBox</code> component, which just displays a simple <code>&lt;div&gt;</code>. Add this code to <code>Tutorial.jsx</code>:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!</span> <span class="nx">I</span> <span class="nx">am</span> <span class="nx">a</span> <span class="nx">CommentBox</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">CommentBox</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">));</span>
</code></pre></div>
<p>Note that native HTML element names start with a lowercase letter, while custom React class names begin with an uppercase letter.</p>

<p>At this point, run your application by clicking the &quot;Play&quot; button in Visual Studio. If successful, your default browser should start and you should see &quot;Hello, world! I am a CommentBox.&quot;</p>

<p><img src="https://d33wubrfki0l68.cloudfront.net/d2a26eef0ff9843a552d0c5942bb9eb8a87cadcc/e64a1/img/tutorial/helloworld.png" alt="Screenshot: Hello ReactJS.NET World!" width="335" /></p>

<p>If you see this, congratulations! You&#39;ve just built your first React component. You can leave the application running while you continue this tutorial. Simply change the JSX file and refresh to see your changes.</p>
<h4><a class="anchor" name="jsx-syntax"></a>JSX Syntax <a class="hash-link" href="#jsx-syntax">#</a></h4>
<p>The first thing you&#39;ll notice is the XML-ish syntax in your JavaScript. We have a simple precompiler that translates the syntactic sugar to this plain JavaScript:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
            <span class="s1">&#39;div&#39;</span><span class="p">,</span>
            <span class="p">{</span> <span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;commentBox&#39;</span> <span class="p">},</span>
            <span class="s1">&#39;Hello, world! I am a CommentBox.&#39;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
    <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">CommentBox</span><span class="p">,</span> <span class="kc">null</span><span class="p">),</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">),</span>
<span class="p">);</span>
</code></pre></div>
<p>Its use is optional but we&#39;ve found JSX syntax easier to use than plain JavaScript. Read more in React&#39;s <a href="https://reactjs.org/docs/jsx-in-depth.html">&quot;JSX In Depth&quot;</a> article.</p>
<h4><a class="anchor" name="whats-going-on"></a>What&#39;s going on <a class="hash-link" href="#whats-going-on">#</a></h4>
<p>We are defining a new JavaScript class that extends from the React.Component class. In our class, we will define some properties and some methods to build from what React.Component already gives us. The most important of these methods is called <code>render</code> which returns a tree of React components that will eventually render to HTML.</p>

<p>The <code>&lt;div&gt;</code> tags are not actual DOM nodes; they are instantiations of React <code>div</code> components. You can think of these as markers or pieces of data that React knows how to handle. React is <strong>safe</strong>. We are not generating HTML strings so XSS protection is the default.</p>

<p>You do not have to return basic HTML. You can return a tree of components that you (or someone else) built. This is what makes React <strong>composable</strong>: a key tenet of maintainable frontends.</p>

<p><code>ReactDOM.render()</code> instantiates the root component, starts the framework, and injects the markup into a raw DOM element, provided as the second argument.</p>

<p>The <code>ReactDOM</code> module exposes DOM-specific methods, while <code>React</code> has the core tools shared by React on different platforms (e.g., <a href="https://facebook.github.io/react-native/">React Native</a>).</p>
<h2><a class="anchor" name="composing-components"></a>Composing components <a class="hash-link" href="#composing-components">#</a></h2>
<p>Let&#39;s build skeletons for <code>CommentList</code> and <code>CommentForm</code> which will, again, be simple <code>&lt;div&gt;</code>s. Add these two components to your file, keeping the existing <code>CommentBox</code> declaration and <code>ReactDOM.render</code> call:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentList</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentList&quot;</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!</span> <span class="nx">I</span> <span class="nx">am</span> <span class="nx">a</span> <span class="nx">CommentList</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">CommentForm</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentForm&quot;</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!</span> <span class="nx">I</span> <span class="nx">am</span> <span class="nx">a</span> <span class="nx">CommentForm</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Next, update the <code>CommentBox</code> component to use these new components:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
<span class="hll">                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span><span class="hll">                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="o">/&gt;</span>
</span><span class="hll">                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="o">/&gt;</span>
</span>            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Notice how we&#39;re mixing HTML tags and components we&#39;ve built. HTML tags are React components just like the ones you define, but they have one difference. The JSX compiler will automatically rewrite HTML tags to <code>React.createElement(tagName)</code> expressions and leave everything else alone. This is to prevent the pollution of the global namespace.</p>
<h3><a class="anchor" name="using-props"></a>Using props <a class="hash-link" href="#using-props">#</a></h3>
<p>Let&#39;s create the <code>Comment</code> component, which will depend on data passed in from our <code>CommentList</code> component. Data passed in from the <code>CommentList</code> component is available as a &#39;property&#39; on our <code>Comment</code> component. These &#39;properties&#39; are accessed through <code>this.props</code>. Using props, we will be able to read the data passed to the <code>Comment</code> from the <code>CommentList</code>, and render some markup:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">Comment</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;comment&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h2</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentAuthor&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
                <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">}</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>By surrounding a JavaScript expression with braces inside JSX (as either an attribute or child), you can drop text or React components into the tree. We access named attributes passed to the component as keys on <code>this.props</code> and any nested elements as <code>this.props.children</code>.</p>
<h3><a class="anchor" name="component-properties"></a>Component Properties <a class="hash-link" href="#component-properties">#</a></h3>
<p>Now that we have defined the <code>Comment</code> component, we will want to pass it the author name and comment text. This allows us to reuse the same code for each unique comment. Now let&#39;s add some comments within our <code>CommentList</code>:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentList</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentList&quot;</span><span class="o">&gt;</span>
<span class="hll">                <span class="o">&lt;</span><span class="nx">Comment</span> <span class="nx">author</span><span class="o">=</span><span class="s2">&quot;Daniel Lo Nigro&quot;</span><span class="o">&gt;</span>
</span><span class="hll">                    <span class="nx">Hello</span> <span class="nx">ReactJS</span><span class="p">.</span><span class="nx">NET</span> <span class="nx">World</span><span class="o">!</span>
</span><span class="hll">                <span class="o">&lt;</span><span class="err">/Comment&gt;</span>
</span>                <span class="o">&lt;</span><span class="nx">Comment</span> <span class="nx">author</span><span class="o">=</span><span class="s2">&quot;Pete Hunt&quot;</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">is</span> <span class="nx">one</span> <span class="nx">comment</span><span class="o">&lt;</span><span class="err">/Comment&gt;</span>
                <span class="o">&lt;</span><span class="nx">Comment</span> <span class="nx">author</span><span class="o">=</span><span class="s2">&quot;Jordan Walke&quot;</span><span class="o">&gt;</span>
                    <span class="nx">This</span> <span class="nx">is</span> <span class="o">*</span><span class="nx">another</span><span class="o">*</span> <span class="nx">comment</span>
                <span class="o">&lt;</span><span class="err">/Comment&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Note that we have passed some data from the parent <code>CommentList</code> component to the child <code>Comment</code> components. For example, we passed <em>Daniel Lo Nigro</em> (via the <code>author</code> attribute) and <em>Hello ReactJS.NET World</em> (via an XML-like child node) to the first <code>Comment</code>. As noted above, the <code>Comment</code> component will access these &#39;properties&#39; through <code>this.props.author</code>, and <code>this.props.children</code>.</p>
<h3><a class="anchor" name="adding-markdown"></a>Adding Markdown <a class="hash-link" href="#adding-markdown">#</a></h3>
<p>Markdown is a simple way to format your text inline. For example, surrounding text with asterisks will make it emphasized.</p>

<p>In this tutorial we use a third-party library called <a href="https://github.com/jonschlinkert/remarkable">remarkable</a> which takes Markdown text and converts it to raw HTML. We already included this library with the original markup for the page, so we can just start using it. Let&#39;s convert the comment text to Markdown and output it:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">Comment</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">        <span class="kr">const</span> <span class="nx">md</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Remarkable</span><span class="p">();</span>
</span>        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;comment&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h2</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentAuthor&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
                <span class="p">{</span><span class="nx">md</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">toString</span><span class="p">())}</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="hll">        <span class="p">);</span>
</span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>All we&#39;re doing here is calling the remarkable library. We need to convert <code>this.props.children</code> from React&#39;s wrapped text to a raw string that remarkable will understand so we explicitly call <code>toString()</code>.</p>

<p>But there&#39;s a problem! Our rendered comments look like this in the browser: &quot;<code>&lt;p&gt;</code>This is <code>&lt;em&gt;</code>another<code>&lt;/em&gt;</code> comment<code>&lt;/p&gt;</code>&quot;. We want those tags to actually render as HTML.</p>

<p>That&#39;s React protecting you from an <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">XSS attack</a>. There&#39;s a way to get around it but the framework warns you not to use it:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">Comment</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
<span class="hll">    <span class="nx">rawMarkup</span><span class="p">()</span> <span class="p">{</span>
</span><span class="hll">        <span class="kr">const</span> <span class="nx">md</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Remarkable</span><span class="p">();</span>
</span><span class="hll">        <span class="kr">const</span> <span class="nx">rawMarkup</span> <span class="o">=</span> <span class="nx">md</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="hll">        <span class="k">return</span> <span class="p">{</span> <span class="nx">__html</span><span class="o">:</span> <span class="nx">rawMarkup</span> <span class="p">};</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;comment&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h2</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentAuthor&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
                <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">dangerouslySetInnerHTML</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">rawMarkup</span><span class="p">()}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="hll">        <span class="p">);</span>
</span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This is a special API that intentionally makes it difficult to insert raw HTML, but for remarkable we&#39;ll take advantage of this backdoor.</p>

<p><strong>Remember:</strong> by using this feature you&#39;re relying on remarkable to be secure. In this case, remarkable automatically strips HTML markup and insecure links from the output.</p>
<h3><a class="anchor" name="hook-up-the-data-model"></a>Hook up the data model <a class="hash-link" href="#hook-up-the-data-model">#</a></h3>
<p>So far we&#39;ve been inserting the comments directly in the source code. Instead, let&#39;s render a blob of JSON data into the comment list. Eventually this will come from the server, but for now, write it in your source:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">Id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">Author</span><span class="o">:</span> <span class="s1">&#39;Daniel Lo Nigro&#39;</span><span class="p">,</span> <span class="nx">Text</span><span class="o">:</span> <span class="s1">&#39;Hello ReactJS.NET World!&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">Id</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">Author</span><span class="o">:</span> <span class="s1">&#39;Pete Hunt&#39;</span><span class="p">,</span> <span class="nx">Text</span><span class="o">:</span> <span class="s1">&#39;This is one comment&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">Id</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">Author</span><span class="o">:</span> <span class="s1">&#39;Jordan Walke&#39;</span><span class="p">,</span> <span class="nx">Text</span><span class="o">:</span> <span class="s1">&#39;This is *another* comment&#39;</span> <span class="p">},</span>
<span class="p">];</span>
</code></pre></div>
<p>We need to get this data into <code>CommentList</code> in a modular way. Modify <code>CommentBox</code> and the <code>ReactDOM.render()</code> call to pass this data into the <code>CommentList</code> via props:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
<span class="hll">                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span>
</span>                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">CommentBox</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">));</span>
</code></pre></div>
<p>Now that the data is available in the <code>CommentList</code>, let&#39;s render the comments dynamically:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentList</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">        <span class="kr">const</span> <span class="nx">commentNodes</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">comment</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span><span class="hll">            <span class="o">&lt;</span><span class="nx">Comment</span> <span class="nx">author</span><span class="o">=</span><span class="p">{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">Author</span><span class="p">}</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">Id</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class="hll">                <span class="p">{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">Text</span><span class="p">}</span>
</span><span class="hll">            <span class="o">&lt;</span><span class="err">/Comment&gt;</span>
</span><span class="hll">        <span class="p">));</span>
</span>        <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentList&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">commentNodes</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
    <span class="p">}</span>
<span class="hll"><span class="p">}</span>
</span></code></pre></div>
<p>That&#39;s it!</p>
<h3><a class="anchor" name="server-side-data"></a>Server-side Data <a class="hash-link" href="#server-side-data">#</a></h3>
<p>Let&#39;s return some data from the server. To do so, we need to first create a C# class to represent our comments. Right-click on ReactDemo and select Add → New Folder and name the folder &quot;Models&quot;. Once the models folder has been created, right click on it, select Add → Class, and enter &quot;CommentModel.cs&quot; as the file name. We&#39;ll create a basic comment model:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="k">namespace</span> <span class="nn">ReactDemo.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">CommentModel</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Author</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Text</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In a real application, you&#39;d use the repository pattern here, and retrieve the comments from a database. For simplicity, we&#39;ll just modify our controller to have a hard-coded list of comments.</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Mvc</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">ReactDemo.Models</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ReactDemo.Controllers</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">HomeController</span> <span class="p">:</span> <span class="n">Controller</span>
    <span class="p">{</span>
<span class="hll">        <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">CommentModel</span><span class="p">&gt;</span> <span class="n">_comments</span><span class="p">;</span>
</span>
        <span class="k">static</span> <span class="nf">HomeController</span><span class="p">()</span>
        <span class="p">{</span>
<span class="hll">            <span class="n">_comments</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">CommentModel</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">{</span>
</span><span class="hll">                <span class="k">new</span> <span class="n">CommentModel</span>
</span><span class="hll">                <span class="p">{</span>
</span><span class="hll">                    <span class="n">Id</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">Author</span> <span class="p">=</span> <span class="s">&quot;Daniel Lo Nigro&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;Hello ReactJS.NET World!&quot;</span>
</span><span class="hll">                <span class="p">},</span>
</span><span class="hll">                <span class="k">new</span> <span class="n">CommentModel</span>
</span><span class="hll">                <span class="p">{</span>
</span><span class="hll">                    <span class="n">Id</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">Author</span> <span class="p">=</span> <span class="s">&quot;Pete Hunt&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;This is one comment&quot;</span>
</span><span class="hll">                <span class="p">},</span>
</span><span class="hll">                <span class="k">new</span> <span class="n">CommentModel</span>
</span><span class="hll">                <span class="p">{</span>
</span><span class="hll">                    <span class="n">Id</span> <span class="p">=</span> <span class="m">3</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">Author</span> <span class="p">=</span> <span class="s">&quot;Jordan Walke&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;This is *another* comment&quot;</span>
</span><span class="hll">                <span class="p">},</span>
</span><span class="hll">            <span class="p">};</span>
</span>        <span class="p">}</span>

        <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Index</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nf">View</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Let&#39;s also add a new controller action to return the list of comments:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="na">[Route(&quot;comments&quot;)]</span>
<span class="na">[ResponseCache(Location = ResponseCacheLocation.None, NoStore = true)]</span>
<span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Comments</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nf">Json</span><span class="p">(</span><span class="n">_comments</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>Route</code> attribute specifies that this action should be used when <code>/comments</code> is loaded. This method of defining URL routes is known as &quot;attribute routing&quot;.</p>

<p>The <code>ResponseCache</code> attribute is used here to prevent browsers from caching the response. When designing a real world API, caching of API requests should be considered more carefully. For this tutorial it is easiest to simply disable caching.</p>

<p>If you hit <code>/comments</code> in your browser, you should now see the data encoded as JSON:</p>

<p><img src="https://d33wubrfki0l68.cloudfront.net/27d258cdc3606289024593abee2ecc453a9424d8/158a3/img/tutorial/json.png" alt="Screenshot: JSON data source" width="468" /></p>
<h3><a class="anchor" name="fetching-from-the-server"></a>Fetching from the server <a class="hash-link" href="#fetching-from-the-server">#</a></h3>
<p>Now that we have a data source, we can replace the hard-coded data with the dynamic data from the server. We will remove the data prop and replace it with a URL to fetch:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
<span class="hll">    <span class="o">&lt;</span><span class="nx">CommentBox</span> <span class="nx">url</span><span class="o">=</span><span class="s2">&quot;/comments&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span>    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">),</span>
<span class="p">);</span>
</code></pre></div>
<p>Note that in a real app, you should generate the URL server-side (via <code>Url.Action</code> call) and pass it down, or use <a href="https://github.com/Daniel15/RouteJs">RouteJs</a> rather than hard-coding it. This tutorial hard-codes it for simplicity.</p>

<p>This component is different from the prior components because it will have to re-render itself. The component won&#39;t have any data until the request from the server comes back, at which point the component may need to render some new comments.</p>
<h3><a class="anchor" name="reactive-state"></a>Reactive state <a class="hash-link" href="#reactive-state">#</a></h3>
<p>So far, based on its props, each component has rendered itself once. <code>props</code> are immutable: they are passed from the parent and are &quot;owned&quot; by the parent. To implement interactions, we introduce mutable <strong>state</strong> to the component. <code>this.state</code> is private to the component and can be changed by calling <code>this.setState()</code> and passing an object that represents changes in state. When the state updates, the component re-renders itself.</p>

<p><code>render()</code> methods are written declaratively as functions of <code>this.props</code> and <code>this.state</code>. The framework guarantees the UI is always consistent with the inputs.</p>

<p>When the server fetches data, we will be changing the comment data we have. Let&#39;s add an array of comment data to the <code>CommentBox</code> component as its state:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
<span class="hll">    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[]</span> <span class="p">};</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
<span class="hll">                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span>
</span>                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>constructor()</code> executes exactly once during the lifecycle of the component and sets up the initial state of the component. Remember to call the super class (the class we&#39;re extending, React.Component) via <code>super(props)</code> before using the <code>this</code> keyword.</p>
<h4><a class="anchor" name="updating-state"></a>Updating state <a class="hash-link" href="#updating-state">#</a></h4>
<p>When the component is first created, we want to GET some JSON from the server and update the state to reflect the latest data. We&#39;ll use the standard XMLHttpRequest API to retrieve the data. If you need support for old browsers (mainly old Internet Explorer), you can use an AJAX library or a multipurpose library such as jQuery. <code>componentWillMount()</code> executes immediately and only once before the rendering occurs. In the following example, <code>componentWillMount()</code> loads the data from our XMLHttpRequest and assigns it to the <code>data</code> variable. Finally, it sets the <code>data</code> variable in state, using <code>setState()</code>.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[]</span> <span class="p">};</span>
    <span class="p">}</span>
<span class="hll">    <span class="nx">componentWillMount</span><span class="p">()</span> <span class="p">{</span>
</span><span class="hll">        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span><span class="hll">        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class="hll">        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="hll">            <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
</span><span class="hll">            <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span> <span class="p">});</span>
</span><span class="hll">        <span class="p">};</span>
</span><span class="hll">        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Below, we&#39;re using <code>componentDidMount()</code>, a method called automatically by React <em>after</em> a component is rendered for the first time. By moving the XMLHttpRequest call from <code>componentWillMount()</code>, which is executed only once <em>before</em> rendering, to a function called <code>loadCommentsFromServer()</code>, we can then call it multiple times from <code>componentDidMount()</code> at a set interval to check for any updates to the comments.</p>

<p>The key to these dynamic updates is the call to <code>this.setState()</code>. We replace the old array of comments with the new one from the server and the UI automatically updates itself. Because of this reactivity, it is only a minor change to add live updates. We will use simple polling here but you could easily use <a href="http://signalr.net/">SignalR</a> or other technologies.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[]</span> <span class="p">};</span>
    <span class="p">}</span>
<span class="hll">    <span class="nx">loadCommentsFromServer</span><span class="p">()</span> <span class="p">{</span>
</span>        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span> <span class="p">});</span>
        <span class="p">};</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
    <span class="p">}</span>
<span class="hll">    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">();</span>
</span><span class="hll">        <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span>
</span><span class="hll">            <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">(),</span>
</span>            <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">pollInterval</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="hll"><span class="p">}</span>
</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">CommentBox</span> <span class="nx">url</span><span class="o">=</span><span class="s2">&quot;/comments&quot;</span> <span class="nx">pollInterval</span><span class="o">=</span><span class="p">{</span><span class="mi">2000</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">,</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">),</span>
<span class="p">);</span>
</code></pre></div>
<p>All we have done here is move the AJAX call to a separate method and call it when the component is first loaded and every 2 seconds after that.</p>
<h3><a class="anchor" name="adding-new-comments"></a>Adding new comments <a class="hash-link" href="#adding-new-comments">#</a></h3>
<p>To accept new comments, we need to first add a controller action to handle it. This will just be some simple C# code that appends the new comment to the static list of comments:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="na">[Route(&quot;comments/new&quot;)]</span>
<span class="na">[HttpPost]</span>
<span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">AddComment</span><span class="p">(</span><span class="n">CommentModel</span> <span class="n">comment</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Create a fake ID for this comment</span>
    <span class="n">comment</span><span class="p">.</span><span class="n">Id</span> <span class="p">=</span> <span class="n">_comments</span><span class="p">.</span><span class="n">Count</span> <span class="p">+</span> <span class="m">1</span><span class="p">;</span>
    <span class="n">_comments</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">comment</span><span class="p">);</span>
    <span class="k">return</span> <span class="nf">Content</span><span class="p">(</span><span class="s">&quot;Success :)&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h4><a class="anchor" name="the-form"></a>The Form <a class="hash-link" href="#the-form">#</a></h4>
<p>Now it&#39;s time to build the form. Our <code>CommentForm</code> component should ask the user for their name and comment text and send a request to the server to save the comment.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentForm</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
<span class="hll">            <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentForm&quot;</span><span class="o">&gt;</span>
</span><span class="hll">                <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Your name&quot;</span> <span class="o">/&gt;</span>
</span><span class="hll">                <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Say something...&quot;</span> <span class="o">/&gt;</span>
</span><span class="hll">                <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Post&quot;</span> <span class="o">/&gt;</span>
</span><span class="hll">            <span class="o">&lt;</span><span class="err">/form&gt;</span>
</span>        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h4><a class="anchor" name="controlled-components"></a>Controlled components <a class="hash-link" href="#controlled-components">#</a></h4>
<p>With the traditional DOM, <code>input</code> elements are rendered and the browser manages the state (its rendered value). As a result, the state of the actual DOM will differ from that of the component. This is not ideal as the state of the view will differ from that of the component. In React, components should always represent the state of the view and not only at the point of initialization.</p>

<p>Hence, we will be using <code>this.state</code> to save the user&#39;s input as it is entered. We define an initial <code>state</code> with two properties <code>author</code> and <code>text</code> and set them to be empty strings. In our <code>&lt;input&gt;</code> elements, we set the <code>value</code> prop to reflect the <code>state</code> of the component and attach <code>onChange</code> handlers to them. These <code>&lt;input&gt;</code> elements with a <code>value</code> set are called controlled components. Read more about controlled components on the <a href="https://reactjs.org/docs/forms.html#controlled-components">Forms article</a>.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentForm</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
<span class="hll">    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">};</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span><span class="hll">    <span class="nx">handleAuthorChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">author</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
</span><span class="hll">    <span class="p">}</span>
</span><span class="hll">    <span class="nx">handleTextChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">text</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
<span class="hll">            <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentForm&quot;</span><span class="o">&gt;</span>
</span><span class="hll">                <span class="o">&lt;</span><span class="nx">input</span>
</span><span class="hll">                    <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
</span><span class="hll">                    <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Your name&quot;</span>
</span><span class="hll">                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span>
</span><span class="hll">                    <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span><span class="p">}</span>
</span><span class="hll">                <span class="o">/&gt;</span>
</span><span class="hll">                <span class="o">&lt;</span><span class="nx">input</span>
</span><span class="hll">                    <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
</span><span class="hll">                    <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Say something...&quot;</span>
</span><span class="hll">                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span>
</span><span class="hll">                    <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span><span class="p">}</span>
</span><span class="hll">                <span class="o">/&gt;</span>
</span>                <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Post&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/form&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h4><a class="anchor" name="events"></a>Events <a class="hash-link" href="#events">#</a></h4>
<p>React attaches event handlers to components using a camelCase naming convention. We attach <code>onChange</code> handlers to the two <code>&lt;input&gt;</code> elements. Now, as the user enters text into the <code>&lt;input&gt;</code> fields, the attached <code>onChange</code> callbacks are fired and the <code>state</code> of the component is modified. Subsequently, the rendered value of the <code>input</code> element will be updated to reflect the current component <code>state</code>.</p>

<p>You&#39;ll notice that we are explicitly binding our event handlers to <code>this</code> in the constructor. While older techniques, like <code>React.createClass(...)</code>, featured automatic binding, we are using ES6 classes to define our components. React components declared as ES6 classes don&#39;t automatically bind <code>this</code> to the instance, so we have to explicitly use <code>.bind(this)</code>.</p>

<p>For components with many event handlers, this explicit binding approach can get tedious. It&#39;s also easy to forget to declare your bindings which can cause some baffling bugs. React does offer two other techniques for ensuring your event handlers are bound properly to your component. Check out the <a href="https://reactjs.org/docs/handling-events.html">Handling Events</a> documentation on the React website for more information.</p>
<h4><a class="anchor" name="submitting-the-form"></a>Submitting the form <a class="hash-link" href="#submitting-the-form">#</a></h4>
<p>Let&#39;s make the form interactive. When the user submits the form, we should clear it, submit a request to the server, and refresh the list of comments. To start, let&#39;s listen for the form&#39;s submit event and clear it.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentForm</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span>    <span class="p">}</span>
    <span class="nx">handleAuthorChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">author</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">handleTextChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">text</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="hll">    <span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class="hll">        <span class="kr">const</span> <span class="nx">author</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
</span><span class="hll">        <span class="kr">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
</span><span class="hll">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">text</span> <span class="o">||</span> <span class="o">!</span><span class="nx">author</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">            <span class="k">return</span><span class="p">;</span>
</span><span class="hll">        <span class="p">}</span>
</span><span class="hll">        <span class="c1">// TODO: send request to the server</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">});</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
<span class="hll">            <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentForm&quot;</span> <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span>
</span>                <span class="o">&lt;</span><span class="nx">input</span>
                    <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
                    <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Your name&quot;</span>
                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span>
                    <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span><span class="p">}</span>
                <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">input</span>
                    <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
                    <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Say something...&quot;</span>
                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span>
                    <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span><span class="p">}</span>
                <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Post&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/form&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>We attach an <code>onSubmit</code> handler to the form that clears the form fields when the form is submitted with valid input. We call <code>preventDefault()</code> on the event to prevent the browser&#39;s default action of submitting the form.</p>
<h4><a class="anchor" name="callbacks-as-props"></a>Callbacks as props <a class="hash-link" href="#callbacks-as-props">#</a></h4>
<p>When a user submits a comment, we will need to refresh the list of comments to include the new one. It makes sense to do all of this logic in <code>CommentBox</code> since <code>CommentBox</code> owns the state that represents the list of comments.</p>

<p>We need to pass data from the child component back up to its parent. We do this in our parent&#39;s <code>render</code> method by passing a new callback (<code>handleCommentSubmit</code>) into the child, binding it to the child&#39;s <code>onCommentSubmit</code> event. Whenever the event is triggered, the callback will be invoked:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[]</span> <span class="p">};</span>
<span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span>    <span class="p">}</span>
    <span class="nx">loadCommentsFromServer</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span> <span class="p">});</span>
        <span class="p">};</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
    <span class="p">}</span>
<span class="hll">    <span class="nx">handleCommentSubmit</span><span class="p">(</span><span class="nx">comment</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="c1">// TODO: submit to the server and refresh the list</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">();</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span>
            <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">(),</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">pollInterval</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
<span class="hll">            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
</span>                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="nx">onCommentSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Now that <code>CommentBox</code> has made the callback available to <code>CommentForm</code> via the <code>onCommentSubmit</code> prop, the <code>CommentForm</code> can call the callback when the user submits the form:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentForm</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">handleAuthorChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">author</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">handleTextChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">text</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="kr">const</span> <span class="nx">author</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
        <span class="kr">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">text</span> <span class="o">||</span> <span class="o">!</span><span class="nx">author</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
<span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onCommentSubmit</span><span class="p">({</span> <span class="nx">Author</span><span class="o">:</span> <span class="nx">author</span><span class="p">,</span> <span class="nx">Text</span><span class="o">:</span> <span class="nx">text</span> <span class="p">});</span>
</span>        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentForm&quot;</span> <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">input</span>
                    <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
                    <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Your name&quot;</span>
                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span>
                    <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleAuthorChange</span><span class="p">}</span>
                <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">input</span>
                    <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
                    <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Say something...&quot;</span>
                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span>
                    <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleTextChange</span><span class="p">}</span>
                <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Post&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/form&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Now that the callbacks are in place, all we have to do is submit to the server and refresh the list:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[]</span> <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">loadCommentsFromServer</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span> <span class="p">});</span>
        <span class="p">};</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
    <span class="p">}</span>
<span class="hll">    <span class="nx">handleCommentSubmit</span><span class="p">(</span><span class="nx">comment</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
</span><span class="hll">        <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="nx">comment</span><span class="p">.</span><span class="nx">Author</span><span class="p">);</span>
</span><span class="hll">        <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">comment</span><span class="p">.</span><span class="nx">Text</span><span class="p">);</span>
</span><span class="hll">
</span><span class="hll">        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span><span class="hll">        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">submitUrl</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class="hll">        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">();</span>
</span><span class="hll">        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">();</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span>
            <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">(),</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">pollInterval</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="nx">onCommentSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="hll"><span class="p">}</span>
</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">CommentBox</span>
        <span class="nx">url</span><span class="o">=</span><span class="s2">&quot;/comments&quot;</span>
        <span class="nx">submitUrl</span><span class="o">=</span><span class="s2">&quot;/comments/new&quot;</span>
        <span class="nx">pollInterval</span><span class="o">=</span><span class="p">{</span><span class="mi">2000</span><span class="p">}</span>
    <span class="o">/&gt;</span><span class="p">,</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">),</span>
<span class="p">);</span>
</code></pre></div><h2><a class="anchor" name="congrats"></a>Congrats! <a class="hash-link" href="#congrats">#</a></h2>
<p>You have just built a comment box in a few simple steps. The below tweaks are not absolutely necessary, but they will improve the performance and polish of your application, so we suggest reading through them. :)</p>

<p>We hope you have enjoyed learning about React and how ReactJS.NET allows you to easily use it from an ASP.NET MVC web application. Learn more about <a href="https://reactjs.org/">React from the project homepage</a> and how to <a href="https://reactjs.org/docs/thinking-in-react.html">think about React components</a>, or dive into the <a href="https://reactjs.org/docs/react-api.html">API reference</a> and start hacking!</p>

<p>Continue on for more awesomeness!</p>
<h2><a class="anchor" name="optimization-optimistic-updates"></a>Optimization: optimistic updates <a class="hash-link" href="#optimization-optimistic-updates">#</a></h2>
<p>Our application is now feature complete but it feels slow to have to wait for the request to complete before your comment appears in the list. We can optimistically add this comment to the list to make the app feel faster.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[]</span> <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">loadCommentsFromServer</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span> <span class="p">});</span>
        <span class="p">};</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">handleCommentSubmit</span><span class="p">(</span><span class="nx">comment</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">        <span class="kr">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span><span class="hll">        <span class="c1">// Optimistically set an id on the new comment. It will be replaced by an</span>
</span><span class="hll">        <span class="c1">// id generated by the server. In a production application you would likely</span>
</span><span class="hll">        <span class="c1">// use a more robust system for ID generation.</span>
</span><span class="hll">        <span class="nx">comment</span><span class="p">.</span><span class="nx">Id</span> <span class="o">=</span> <span class="nx">comments</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class="hll">        <span class="kr">const</span> <span class="nx">newComments</span> <span class="o">=</span> <span class="nx">comments</span><span class="p">.</span><span class="nx">concat</span><span class="p">([</span><span class="nx">comment</span><span class="p">]);</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">newComments</span> <span class="p">});</span>
</span>
        <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;Author&#39;</span><span class="p">,</span> <span class="nx">comment</span><span class="p">.</span><span class="nx">Author</span><span class="p">);</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;Text&#39;</span><span class="p">,</span> <span class="nx">comment</span><span class="p">.</span><span class="nx">Text</span><span class="p">);</span>

        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">submitUrl</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">();</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span>
            <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">(),</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">pollInterval</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="nx">onCommentSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2><a class="anchor" name="optimization-bundling-and-minification"></a>Optimization: Bundling and minification <a class="hash-link" href="#optimization-bundling-and-minification">#</a></h2>
<p>Bundling refers to the practice of combining multiple JavaScript files into a single large file to reduce the number of HTTP requests to load a page. Minification refers to the removal of comments and unnecessary whitespace from JavaScript files to make them smaller. Together, bundling and minification can help to significantly improve the performance of your website.</p>

<p>There used to be a section on bundling and minification in this tutorial, but unfortunately the latest library being used by ASP.NET Core MVC (<a href="https://github.com/madskristensen/BundlerMinifier">BundlerMinifier</a>) is not easily extensible, which makes it difficult to add JSX processing to it. For production use, it is currently recommended to use a tool like Gulp or <a href="/guides/webpack.html">Webpack</a> to bundle and minify your JavaScript.</p>
<h2><a class="anchor" name="optimization-server-side-rendering"></a>Optimization: Server-side rendering <a class="hash-link" href="#optimization-server-side-rendering">#</a></h2>
<p>Server-side rendering means that your application initially renders the components on the server-side, rather than fetching data from the server and rendering using the client. Server-side rendering enhances the performance of your application since the user will see the initial state immediately.</p>

<p>We need to make some modifications to <code>CommentBox</code> to support server-side rendering. Firstly, we need to accept an <code>initialData</code> prop, which will be used to set the initial state of the component, rather than doing an AJAX request. We also need to remove the <code>loadCommentsFromServer</code> call from <code>componentDidMount</code>, since it is no longer required. Also, we need to remove the <code>ReactDOM.render</code> call from the JSX file, as server-side rendering automatically outputs the correct <code>ReactDOM.render</code> call for you.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">CommentBox</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
<span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">initialData</span> <span class="p">};</span>
</span>        <span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">loadCommentsFromServer</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span> <span class="p">});</span>
        <span class="p">};</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">handleCommentSubmit</span><span class="p">(</span><span class="nx">comment</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="nx">comment</span><span class="p">.</span><span class="nx">Id</span> <span class="o">=</span> <span class="nx">comments</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kr">const</span> <span class="nx">newComments</span> <span class="o">=</span> <span class="nx">comments</span><span class="p">.</span><span class="nx">concat</span><span class="p">([</span><span class="nx">comment</span><span class="p">]);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">newComments</span> <span class="p">});</span>

        <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;Author&#39;</span><span class="p">,</span> <span class="nx">comment</span><span class="p">.</span><span class="nx">Author</span><span class="p">);</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;Text&#39;</span><span class="p">,</span> <span class="nx">comment</span><span class="p">.</span><span class="nx">Text</span><span class="p">);</span>

        <span class="kr">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">submitUrl</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">();</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
<span class="hll">    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
</span><span class="hll">        <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span>
</span><span class="hll">            <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadCommentsFromServer</span><span class="p">(),</span>
</span>            <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">pollInterval</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Comments</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">CommentForm</span> <span class="nx">onCommentSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleCommentSubmit</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>We also need to update the <code>Comment</code> component to use <code>Remarkable</code> from either <code>global</code> or <code>window</code>, due to a bug in Remarkable:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">createRemarkable</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">remarkable</span> <span class="o">=</span>
<span class="hll">        <span class="s1">&#39;undefined&#39;</span> <span class="o">!=</span> <span class="k">typeof</span> <span class="nx">global</span> <span class="o">&amp;&amp;</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Remarkable</span>
</span>            <span class="o">?</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Remarkable</span>
            <span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">Remarkable</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">remarkable</span><span class="p">();</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">Comment</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">rawMarkup</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">md</span> <span class="o">=</span> <span class="nx">createRemarkable</span><span class="p">();</span>
        <span class="kr">const</span> <span class="nx">rawMarkup</span> <span class="o">=</span> <span class="nx">md</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">__html</span><span class="o">:</span> <span class="nx">rawMarkup</span> <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;comment&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">h2</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentAuthor&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
                <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">dangerouslySetInnerHTML</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">rawMarkup</span><span class="p">()}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In the view, we will accept the list of comments as the model, and use <code>Html.React</code> to render the component. This will replace the <code>ReactDOM.render</code> call that currently exists in Tutorial.jsx. All the props from the current <code>ReactDOM.render</code> call should be moved here, and the <code>ReactDOM.render</code> call should be deleted.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="hll">@model IEnumerable<span class="nt">&lt;ReactDemo.Models.CommentModel&gt;</span>
</span>@{
    Layout = null;
}
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Hello React<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="hll">    @Html.React(&quot;CommentBox&quot;, new
</span><span class="hll">    {
</span><span class="hll">        initialData = Model,
</span><span class="hll">        url = Url.Action(&quot;Comments&quot;),
</span><span class="hll">        submitUrl = Url.Action(&quot;AddComment&quot;),
</span><span class="hll">        pollInterval = 2000,
</span><span class="hll">    })
</span>    <span class="nt">&lt;script </span><span class="na">crossorigin</span> <span class="na">src=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/react/16.4.0/umd/react.development.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">crossorigin</span> <span class="na">src=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.4.0/umd/react-dom.development.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/remarkable/1.7.1/remarkable.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;@Url.Content(&quot;</span><span class="err">~/</span><span class="na">js</span><span class="err">/</span><span class="na">tutorial</span><span class="err">.</span><span class="na">jsx</span><span class="err">&quot;)&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="hll">    @Html.ReactInitJavaScript()
</span><span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>We need to modify the controller action to pass the data to the view:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Index</span><span class="p">()</span>
<span class="p">{</span>
<span class="hll">    <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">_comments</span><span class="p">);</span>
</span><span class="p">}</span>
</code></pre></div>
<p>We also need to modify <code>Startup.cs</code> to tell ReactJS.NET which JavaScript files it requires for the server-side rendering:</p>
<div class="highlight"><pre><code class="csharp language-csharp" data-lang="csharp"><span class="c1">// Initialise ReactJS.NET. Must be before static files.</span>
<span class="n">app</span><span class="p">.</span><span class="n">UseReact</span><span class="p">(</span><span class="n">config</span> <span class="p">=&gt;</span>
<span class="p">{</span>
<span class="hll">    <span class="n">config</span>
</span><span class="hll">        <span class="p">.</span><span class="n">AddScript</span><span class="p">(</span><span class="s">&quot;~/js/remarkable.min.js&quot;</span><span class="p">)</span>
</span><span class="hll">        <span class="p">.</span><span class="n">AddScript</span><span class="p">(</span><span class="s">&quot;~/js/tutorial.jsx&quot;</span><span class="p">);</span>
</span><span class="hll"><span class="p">});</span>
</span></code></pre></div>
<p>Note that we need a copy of Remarkable in order to load it for server-side rendering. In a production app you&#39;d probably use Bower or npm for this, but for our tutorial you can just <a href="https://cdnjs.cloudflare.com/ajax/libs/remarkable/1.7.1/remarkable.min.js">download the file from CDNJS</a> and save it into <code>~/js</code>.</p>

<p>That&#39;s it! Now if you build and refresh your application, you should notice that the comments box is rendered immediately rather than having a slight delay. If you view the source of the page, you will see the initial comments directly in the HTML itself:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>Hello React<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;react1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;commentBox&quot;</span> <span class="na">data-reactid=</span><span class="s">&quot;.2ged0u96as7&quot;</span> <span class="na">data-react-checksum=</span><span class="s">&quot;118121939&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1</span> <span class="na">data-reactid=</span><span class="s">&quot;.2ged0u96as7.0&quot;</span><span class="nt">&gt;</span>Comments<span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;commentList&quot;</span> <span class="na">data-reactid=</span><span class="s">&quot;.2ged0u96as7.1&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;comment&quot;</span> <span class="na">data-reactid=</span><span class="s">&quot;.2ged0u96as7.1.0&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">&quot;commentAuthor&quot;</span> <span class="na">data-reactid=</span><span class="s">&quot;.2ged0u96as7.1.0.0&quot;</span><span class="nt">&gt;</span>Daniel Lo Nigro<span class="nt">&lt;/h2&gt;</span>
          <span class="nt">&lt;span</span> <span class="na">data-reactid=</span><span class="s">&quot;.2ged0u96as7.1.0.1&quot;</span><span class="nt">&gt;&lt;p&gt;</span>Hello ReactJS.NET World!<span class="nt">&lt;/p&gt;&lt;/span&gt;</span>
        <span class="nt">&lt;/div&gt;</span>

    <span class="c">&lt;!-- Rest of the contents ommitted for brevity --&gt;</span>
</code></pre></div>

    <h2>Comments</h2>
    <div class="fb-comments" data-width="650" data-num-posts="10" data-href="http://reactjs.net/tutorials/aspnetcore.html" data-order-by="reverse_time"></div>
  </div>
</section>


    <footer class="wrap">
      <div class="right">
        &copy; 2014-Present Facebook Inc.
        <a href="https://github.com/reactjs/React.NET/blob/master/site/jekyll/tutorials/aspnetcore.md" target="_blank">
          Edit this page on GitHub
        </a>
      </div>
    </footer>
  </div>

  <!-- Algolia search -->
  <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
  <script>
  docsearch({
    apiKey: 'e9888f8a8af8c16709c02402b15c7695',
    indexName: 'reactjs_net',
    inputSelector: '#algolia-doc-search',
    debug: false // Set debug to true if you want to inspect the dropdown
  });
  </script>

  <!-- Facebook SDK -->
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=1417169611875552";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  <!-- Website Custom Audience -->
  <script>(function() {
    var _fbq = window._fbq || (window._fbq = []);
    if (!_fbq.loaded) {
      var fbds = document.createElement('script');
      fbds.async = true;
      fbds.src = '//connect.facebook.net/en_US/fbds.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(fbds, s);
      _fbq.loaded = true;
    }
    _fbq.push(['addPixelId', "395824213885429"]);
  })();
  window._fbq = window._fbq || [];
  window._fbq.push(["track", "PixelInitialized", {}]);
  </script>
  <noscript><img height="1" width="1" border="0" alt="" style="display:none" src="https://www.facebook.com/tr?id=395824213885429&amp;ev=NoScript" /></noscript>
</body>
</html>
